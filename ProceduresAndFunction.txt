CREATE PROCEDURE dbo.nuevoUsuarioXML
	@inNombre VARCHAR
	,@inPassword VARCHAR
	@outResultCode INT
AS
BEGIN
	SET NOCOUNT ON;
	BEGIN TRY
	
		INSERT INTO dbo.Usuario
			(
			nombreUsuario
			,Pin
			)
			VALUES(
			@inNombre
			,@inPassword
			)
			
		
	END TRY
	BEGIN CATCH

	SET @outResultCode=50001; -- error 
	END CATCH
	SET NOCOUTN OFF;
END

CREATE FUNCTION dbo.TDTHnombreToid (@inNombre VARCHAR(32))
RETURNS INT
AS
BEGIN
    DECLARE @resultado INT;
    SELECT @resultado = A.Id
    FROM TipoDeTH A
    WHERE A.Tipo = @inNombre;
    RETURN @resultado;
END;

CREATE FUNCTION dbo.VDTHToid (@inValorDocTH VARCHAR(32)) -- VDTH valor de tipo de TH
RETURNS INT
AS
BEGIN
    DECLARE @resultado INT;
    SELECT @resultado = A.Id
    FROM TH A
    WHERE A.ValorDocIdentidad = @inValorDocTH;
    RETURN @resultado;
END;

